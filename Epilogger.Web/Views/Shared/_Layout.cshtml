<!doctype html>
<!--[if lt IE 7 ]><html class="ie ie6" lang="en"> <![endif]-->
<!--[if IE 7 ]><html class="ie ie7" lang="en"> <![endif]-->
<!--[if IE 8 ]><html class="ie ie8" lang="en"> <![endif]-->
<!--[if (gte IE 9)|!(IE)]><!--><html lang="en"> <!--<![endif]-->
<head>

	<!-- Basic Page Needs
  ================================================== -->
	<meta charset="utf-8" />
    <title>@ViewBag.Title</title>
	<meta name="description" content="">
	<meta name="author" content="">
	<!--[if lt IE 9]>
		<script src="http://html5shim.googlecode.com/svn/trunk/html5.js"></script>
	<![endif]-->
	
	<!-- Mobile Specific Metas
  ================================================== -->
	@*<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1" /> *@
	
    <link href="@Url.Content("~/Public/css/reset.css")" rel="stylesheet" type="text/css" />
    <link href="@Url.Content("~/Public/css/960_12_col.css")" rel="stylesheet" type="text/css" />
    <link href="@Url.Content("~/Public/css/messages.css")" rel="stylesheet" type="text/css" />
	<link href="@Url.Content("~/Public/css/sadiehawkins.css")" rel="stylesheet" type="text/css" />
    <link href="@Url.Content("~/Public/css/jquery-ui-1.8.16.custom.css")" rel="stylesheet" type="text/css" />
    <link href="@Url.Content("~/Public/css/colorbox.css")" rel="stylesheet" type="text/css" />
    <link href="@Url.Content("~/Public/js/prettyPhoto/css/prettyPhoto.css")" rel="stylesheet" type="text/css" media="screen" title="prettyPhoto main stylesheet" charset="utf-8" />
    <link href="@Url.Content("~/Public/js/AnyTime/anytimec.css")" rel="stylesheet" type="text/css" />
    <link href="@Url.Content("~/Public/js/datetime/txtdropdown/txtdropdown.css")" rel="stylesheet" type="text/css" />


    <script src="@Url.Content("~/Public/js/head.load.min.js")" type="text/javascript" language="javascript"></script>
    <script type="text/javascript" language="javascript">
        head.js('@Url.Content("~/Public/js/jquery-1.6.2.min.js")');
        head.js('@Url.Content("~/Public/js/jquery-ui-1.8.16.custom.min.js")');
        head.js('@Url.Content("~/Public/js/jquery.unobtrusive-ajax.min.js")');
        head.js('@Url.Content("~/Public/js/prettyPhoto/js/jquery.prettyPhoto.js")');
        head.js('@Url.Content("~/Public/js/epilogger.js")');
        head.js('@Url.Content("~/Public/js/AnyTime/anytimec.js")');
        head.js('@Url.Content("~/Public/js/jquery.expander.min.js")', function () {
            $('div#event-intro').expander({
                slicePoint: 256,  // default is 100
                expandPrefix: ' ', // default is '... '
            });
        });
        head.js('@Url.Content("~/Public/js/datetime/txtdropdown/jquery.scrollTo-min.js")');
        head.js('@Url.Content("~/Public/js/datetime/txtdropdown/txtdropdown.js")');
        head.js('@Url.Content("~/Public/js/datetime/timedropdown/timedropdown.js")');

        head.js('@Url.Content("~/Public/js/clickmap.js")');
        head.js('@Url.Content("~/Public/js/jquery.colorbox-min.js")');
        head.js('@Url.Content("~/Public/js/jquery.cookie.js")');
    </script>
	<!-- Favicons
	================================================== 
	<link rel="shortcut icon" href="images/favicon.ico">
	<link rel="apple-touch-icon" href="images/apple-touch-icon.png">
	<link rel="apple-touch-icon" sizes="72x72" href="images/apple-touch-icon-72x72.png" />
	<link rel="apple-touch-icon" sizes="114x114" href="images/apple-touch-icon-114x114.png" />-->
	
</head>
<body>
    
@Html.Raw(Html.Notify())
<div id="flash"></div>

<div id="global-bar">  
    <div class="container_12 clearfix">

        <div id="search-container">
		    <input type="text" value="Search" class="remove-bottom"/>
		    <input type="image" src="@Url.Content("~/Public/images/btn-submit.png")"/>
	    </div>	

        @Html.Action("GlobalNavigation", "Navigation")
        <div id="admin-area"><a href="#demo" class="displayClicks">CM</a></div> 	
    </div>     
</div>

<div class="container_12 clearfix" id="outer-container">
    <div id="header">
        <a href="/">@Html.Raw(Html.Image("logo.png", "id='logo'"))</a>
        @Html.Partial("Navigation")

    </div>

    <div id="content-container">
        @Html.Action("RenderBreadCrumb", "Navigation")
        <br style="clear:both;" />
        @RenderBody()
        <div class="clear"></div>
		<div class="spacer"></div>
    </div>
</div>

<script language="javascript" type="text/javascript">
    /* Capture ALL clicks in EPL - Going to use this for user Click tracking to create a click map */
//    head.ready(function() {
//        $(document).bind('click', function (e) {
//            //console.log(e)

//            //Post information back to EPL
//            $.ajax({
//                url: '/Home/LogClick',
//                type: 'POST',
//                data: { href: e.srcElement.href, PathName: e.srcElement.pathname, UserAgent: jQuery.browser },
//                success: function (result) {
//                    // TODO: nothing
//                }
//            });
//        });
    //    });


    //Store all clicks, for interface tweaking.
    head.ready(function () {
        $(document).saveClicks(); 

        $('.displayClicks').click(function() {
            $.displayClicks();
            $('#clickmap-overlay').click(function() {
                 $.removeClicks();
                 $(document).saveClicks();
            });
            $(document).stopSaveClicks();
            return false;
        });

        $(".datepicker").datepicker({
            showAnim: '',
            dateFormat: 'm/d/yy',
            showOn: 'button',
            buttonImageOnly: true,
            buttonImage: '@Url.Content("~/Public/js/datetime/txtdropdown/txtdropdown-btn.png")',
            buttonText: 'Select a date'
        });

        $(".timedropdown").timedropdown();
    });



    //Saves all information when a user clicks on a link.
    head.ready(function () {
        $("a").bind('click', function (e) {
            //console.log(e)

            //For the images, we need to access the parent to get the image properties.
            if (e.srcElement.host == null) {
                e.srcElement = e.srcElement.parentElement;
            }
            if (typeof EventID == "undefined") {
                EventID = 0;
            }

            //Post information back to EPL
            $.ajax({
                url: '/Home/LogClick',
                type: 'POST',
                data: { href: e.srcElement.href, PathName: e.srcElement.pathname, UserAgent: navigator.userAgent, Host: e.srcElement.host, EventID: EventID },
                success: function (result) {
                    // TODO: nothing
                }
            });
        });
    });

</script>


</body>
</html>

