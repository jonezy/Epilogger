@model Epilogger.Web.Models.LiveModeViewModel

@{
    Layout = null;
}

@using Combres.Mvc
@using Epilogger.Web.Models


<!doctype html>

<html>
    <head>
	    <meta charset="utf-8" />
        <meta name="google-site-verification" content="CuQwuSsvoWQapx1142El31mqbNSB6Dq0RBzTjzV0lXQ" />   

        <title>@ViewBag.Title</title>

        @Html.CombresLink("LiveModeCss")
        @Html.CombresLink("LiveModeJs")
        
        
        <script language="javascript" type="text/javascript">
            var EventID = @Model.EventId;
            
            var disableAutoupdate = false;

            //Parameters to control the Tweet list
            var pageLoadTime = '@string.Format("{0:yyyy-MM-dd HH:mm:ss}", DateTime.UtcNow)';
            var photoPageLoadTime = '@string.Format("{0:yyyy-MM-dd HH:mm:ss}", DateTime.Now)';
            
            var updateTimeout = 10000;
            
            var updateRate = 40000;
            var photoUpdateRate = 15000;



            //var updateTimeout = 5000;
            //var updateRate = 10000;
            //var photoUpdateTimeout = 10000;
            //var prologuePostsUpdates = 1;
            //var isFirstFrontPage = 1;   
            //var postsOnPage = new Array;
            //var postsOnPageQS = '';
            //var maxItemsOnPage = 6;
            //Parameters to control the Image List
            
            //var photoProloguePostsUpdates = 1;
            //var photoIsFirstFrontPage = 1;
            //var photoPageLoadTime = pageLoadTime;
    
            //var photoPostsOnPage = new Array;
            //var photoPostsOnPageQS = '';
            //var photoMaxItemsOnPage = 9;

        </script>

    </head>


    <body>
        <div id="content">
            <div id="tweets">
                <div class="tweet-column" id="tweetColumn1"><div class="tweet"></div><div class="tweet"></div></div>
                <div class="tweet-column" id="tweetColumn2"><div class="tweet"></div><div class="tweet"></div></div>
                <div class="tweet-column" id="tweetColumn3"><div class="tweet"></div><div class="tweet"></div></div>
    
                
                   @* @{
                        var tCount = 1;
                        var colCount = 1;
                    }    
                
                    @foreach(var tweet in Model.Tweets)
                    {
                        if (tCount == 1 || tCount == 3 || tCount == 5)
                        {
                            @Html.Raw("<div class='tweet-column' id='tweetColumn" + colCount + "'>")
                            colCount++;
                        }

                        @Html.Partial("_LiveTweetTemplate", new TweetTemplateViewModel() { CanDelete = false, Tweet = tweet, ShowControls = false, EventId = (int) tweet.EventID })

                        if (tCount == 2 || tCount == 4 || tCount == 6)
                        {
                            @Html.Raw("</div>")
                        }
                        tCount++;
                    }*@
                </div>
		
            <div id="photos">
                @{
                    var imgCount = 1;
                }
                @foreach(var img in Model.Images)
                {
                    if (imgCount < 3)
                    {
                        <div class="imgLarge images">
                            <img src="@img.Fullsize" width="300" alt="" />
                        </div>
                    }
                    else
                    {
                        if (imgCount == 3) { <br style="clear:both"/> }
                        <div class="imgSmall images">
                            <img src="@img.Fullsize" alt="" width="150" />
                        </div>
                    }
                    imgCount++;
                }

            </div>
	</div>
	
	
	<div id="footer">
		<div id="logo">
			<img src="/Public/images/livemode/client/logo.png"/>
		</div>
		
		<div id="hashtag-sponsors">
			<big class="colour1">
				Tweet! Take a photo!<br/>
				Hashtag: <span class="colour2">@Model.Hashtag</span>
			</big>
			
			<h1 class="colour1"	>Our sponsors</h1>
			<img src="/Public/images/livemode/client/sponsor1.png"/>
			<img src="/Public/images/livemode/client/sponsor2.png"/>
		</div>
		
		<div id="top-tweeters">
			<h1 class="colour1">Top Tweeters</h1>
            <ul id="topTweets">
                @foreach (var tt in Model.TopTweeters.Take(3))
                {
                    <li>
                        <img src="@tt.Picture" height="35" alt=""/>
                        <strong class="colour3">@@@tt.Name</strong><br/>
                        @tt.Total tweets
                    </li>
                }
            </ul>			
		</div>
		
		<div id="stats-credits">
			<h1 class="colour1">Statistics</h1>
			<img src="/Public/images/livemode/icon-numtweets.png" alt="" /><span id="tweetCount"> @Model.EpiloggerCounts.TweetCount</span> &nbsp;&nbsp;&nbsp;
			<img src="/Public/images/livemode/icon-numphotos.png" alt="" /><span id="photoCount"> @Model.EpiloggerCounts.PhotoCount</span> &nbsp;&nbsp;&nbsp;
			<img src="/Public/images/livemode/icon-numpeople.png" alt="" /><span id="uniqueCount"> @Model.EpiloggerCounts.UniqueTweeterCount</span>
			
			<br/><br/>
			
            <h1 class="colour1">Powered by: <img src="/Public/images/livemode/logo-epl.png" alt="Epilogger" /></h1>
            @*<a href="" id="updateLink">Update</a>&nbsp;&nbsp;&nbsp;&nbsp;<a href="" id="stopLink">Stop</a>*@
            <div id="ajaxBusy">Loading...</div>
		</div>
	</div>
    </body>
</html>
